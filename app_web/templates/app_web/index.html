{% extends 'app_web/components/base.html' %}
{% load static %}
{% block title %}Blue Archive Gacha Similator{% endblock %}

{% block css %}
<!-- <link rel="stylesheet" href="{% static 'css/debug_layout.css'%}"> -->
{% endblock %}

{% block body %}
<style>
  strong {
      color: #5fdbff;
      text-shadow: 
          -1px -1px 0 black,  
          1px -1px 0 black,
          -1px  1px 0 black,
          1px  1px 0 black;
  }
</style>


<!--
  Navbar powered by Tailwind CSS and Alpine.js for interactivity.
  - `x-data="{ openMenu: false, openDropdown: false }"`: Initializes Alpine.js state for the mobile menu and user dropdown.
  - `@click.away`: A helper to close the dropdown/menu when clicking outside of it.
  - `x-show="openMenu"`: Toggles visibility based on the 'openMenu' state.
-->

<nav x-data="{ openMenu: false, openDropdown: false }" class="fixed top-0 left-0 right-0 z-50 bg-slate-900/60 backdrop-blur-lg border-b border-slate-700/50">
  <div class="w-full max-w-6xl mx-auto px-4">
    <div class="flex items-center justify-between h-20">
      
      <!-- Navbar Brand (Left) -->
      <a class="flex-shrink-0" href="{% url 'home' %}">
        <img src="{% static 'images/web/logo.png' %}" alt="logo" class="h-12 w-auto">
      </a>

      <!-- Primary Navigation (Desktop) -->
      <div class="hidden lg:flex lg:items-center lg:space-x-8">
        <a class="text-slate-300 hover:text-cyan-400 transition-colors duration-200" href="{% url 'student' %}">Student</a>
        <a class="text-slate-300 hover:text-cyan-400 transition-colors duration-200" href="{% url 'gacha' %}">Gacha</a>
        
        <!-- User authentication links for desktop -->
        {% if user.is_authenticated %}
          <div class="relative">
            <!-- Dropdown Toggle Button -->
            <button @click="openDropdown = !openDropdown" class="flex items-center space-x-2 text-slate-300 hover:text-cyan-400 transition-colors duration-200">
              <span>{{ user.username }}</span>
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
            </button>
            
            <!-- Dropdown Menu -->
            <div x-show="openDropdown" @click.away="openDropdown = false" x-transition class="absolute right-0 mt-2 w-48 py-2 bg-slate-800 border border-slate-700 rounded-lg shadow-xl" style="display: none;">
              {% if user.is_superuser %}
                <a class="block px-4 py-2 text-sm text-slate-300 hover:bg-slate-700 hover:text-cyan-400" href="{% url 'admin:index' %}">Superuser</a>
                <hr class="border-slate-700">
              {% endif %}
              <a class="block px-4 py-2 text-sm text-slate-300 hover:bg-slate-700 hover:text-cyan-400" href="{% url 'dashboard' %}">Dashboard</a>
              <form action="{% url 'logout' %}" method="POST">
                {% csrf_token %}
                <button type="submit" class="w-full text-left px-4 py-2 text-sm text-slate-300 hover:bg-slate-700 hover:text-cyan-400">Logout</button>
              </form>
            </div>
          </div>
        {% else %}
          <a class="text-slate-300 hover:text-cyan-400 transition-colors duration-200" href="{% url 'register' %}">Register</a>
          <a class="px-4 py-2 text-white bg-cyan-600 hover:bg-cyan-500 rounded-md transition-colors duration-200" href="{% url 'login' %}">Login</a>
        {% endif %}
      </div>

      <!-- Mobile Menu Button -->
      <div class="lg:hidden">
        <button @click="openMenu = !openMenu" class="text-slate-300 hover:text-cyan-400">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
        </button>
      </div>

    </div>
  </div>

  <!-- Mobile Menu (collapsible) -->
  <div x-show="openMenu" x-transition class="lg:hidden bg-slate-900/80 border-t border-slate-700" style="display: none;">
    <div class="px-4 pt-2 pb-4 space-y-2">
      <a class="block px-3 py-2 text-slate-300 hover:bg-slate-700 rounded-md" href="{% url 'student' %}">Student</a>
      <a class="block px-3 py-2 text-slate-300 hover:bg-slate-700 rounded-md" href="{% url 'gacha' %}">Gacha</a>
      
      <hr class="border-slate-700">

      <!-- User authentication links for mobile -->
      {% if user.is_authenticated %}
        <div class="px-3 py-2 text-slate-400 font-semibold">{{ user.username }}</div>
        {% if user.is_superuser %}
          <a class="block px-3 py-2 text-slate-300 hover:bg-slate-700 rounded-md" href="{% url 'admin:index' %}">Superuser</a>
        {% endif %}
        <a class="block px-3 py-2 text-slate-300 hover:bg-slate-700 rounded-md" href="{% url 'dashboard' %}">Dashboard</a>
        <form action="{% url 'logout' %}" method="POST" class="w-full">
          {% csrf_token %}
          <button type="submit" class="w-full text-left block px-3 py-2 text-slate-300 hover:bg-slate-700 rounded-md">Logout</button>
        </form>
      {% else %}
        <a class="block px-3 py-2 text-slate-300 hover:bg-slate-700 rounded-md" href="{% url 'register' %}">Register</a>
        <a class="block px-3 py-2 text-slate-300 hover:bg-slate-700 rounded-md" href="{% url 'login' %}">Login</a>
      {% endif %}
    </div>
  </div>
</nav>

<!--
  Key Adaptation Choices:
  - Background: A full-page background image is used to create an immersive feel. A dark overlay ensures text readability.
  - Dark Theme: `bg-black` or dark gradients are used. Text is primarily light (`text-slate-200`, `text-white`).
  - Frosted Glass Panels: `bg-slate-900/50` and `backdrop-blur-lg` are used on the content containers to create the modern, semi-transparent look.
  - Accent Borders: `border-cyan-400` or similar vibrant colors are used to add highlights and visual separation, mimicking the reference site's UI.
  - Typography: Font sizes, weights (`font-bold`, `font-light`), and colors are adjusted for a more dramatic and modern feel.
  - Spacing & Layout: More generous padding (`p-6` or `p-8`) is used inside containers for a premium, uncluttered look.
-->

<div class="relative min-h-screen w-full bg-black antialiased pt-20">
  <!-- Background Image / Video -->
  <div class="absolute inset-0 z-0">
    <!-- 
      You can replace this with your own high-quality background.
      The opacity and filter ensure the text on top remains readable.
    -->
    <img src="{% static 'images/web/background.png' %}" alt="Background" class="object-cover w-full h-full opacity-30 filter blur-sm">
    <div class="absolute inset-0 bg-gradient-to-t from-black via-black/0 to-transparent"></div>
  </div>

  <!-- Main Content Container (z-10 places it above the background) -->
  <div class="relative z-10 w-full max-w-6xl mx-auto px-4 py-8">
    
    <!-- Outer Flex Container -->
    <div class="flex flex-col gap-4">

      <!-- Upper Row -->
      <div class="grid grid-cols-1 lg:grid-cols-5 gap-4">
        
        <!-- Left Column (Spanning 3 of 5 columns on large screens) -->
        <div class="lg:col-span-3 flex flex-col p-6 bg-slate-900/50 backdrop-blur-lg border border-slate-700 rounded-lg shadow-2xl">
          <div class="flex items-center mb-6 gap-4">
            <div class="relative flex-shrink-0 w-24 h-24 overflow-hidden rounded-full border-2 border-cyan-400/50">
              <img class="absolute top-0 left-0 object-cover w-full h-full" src="{% static 'images/web/arona.png' %}" alt="Arona">
            </div>
            <h1 class="text-4xl font-bold text-white tracking-wide">Welcome, Sensei!</h1>
          </div>

          <p class="text-lg text-slate-300 font-light">
            An unofficial web application, serving as a Gacha Simulator for the mobile game Blue Archive, developed by Nexon Games and published by Yostar (Japan) and Nexon (Global). Experience the gacha, test your luck, and have fun without spending any Pyroxene.
          </p>
          
          <h2 class="mt-8 mb-3 text-2xl font-semibold text-white border-b-2 border-cyan-400/30 pb-2">Features</h2>
          <ul class="space-y-2 text-slate-300">
            <li class="flex items-start gap-3">
              <svg class="w-5 h-5 mt-1 text-cyan-400 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
              <span><strong>Gacha Simulator:</strong> with pick-up rates similar to the mobile game.</span>
            </li>
            <li class="flex items-start gap-3">
              <svg class="w-5 h-5 mt-1 text-cyan-400 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
              <span><strong>User account:</strong> for tracking information such as collections and achievements.</span>
            </li>
            <li class="flex items-start gap-3">
              <svg class="w-5 h-5 mt-1 text-cyan-400 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
              <span><strong>Student Collection:</strong> in the current game version.</span>
            </li>
            <li class="flex items-start gap-3">
              <svg class="w-5 h-5 mt-1 text-cyan-400 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
              <span><strong>Guest Mode:</strong> Jump right in and test your luck instantly.</span>
            </li>
            <li class="flex items-start gap-3">
              <svg class="w-5 h-5 mt-1 text-cyan-400 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
              <span><strong>Open Source:</strong> A passion hobby project for learning and sharing.</span>
            </li>
          </ul>
        </div>

        <!-- Right Column (hero section) -->
        <div class="relative lg:col-span-2 w-full min-h-[300px] lg:min-h-0 overflow-hidden bg-slate-900 border border-slate-700 rounded-lg shadow-2xl">
          <!-- Video Background -->
          <video autoplay muted loop class="absolute top-0 left-0 w-full h-full object-cover z-0">
            <source src="{% static 'video/gacha.mov' %}" type="video/mp4">
            Your browser does not support the video tag.
          </video>
          
          <!-- Gradient Overlay for Text Readability -->
          <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent z-10"></div>
          
          <!-- Centered Caption -->
          <div class="absolute inset-0 flex items-center justify-center z-20">
            <h2 
              class="text-6xl font-black text-white uppercase tracking-widest" 
              style="text-shadow: 2px 2px 10px rgba(0, 0, 0, 0.7);"
            >
              SALTY
            </h2>
          </div>
        </div>
        <!-- End of Right Column -->

      </div>

      <!-- Below Row -->
      <div class="p-4 text-center bg-black/50 backdrop-blur-lg border border-slate-800 rounded-lg">
        <p class="text-sm text-slate-400">
          Developed by <a href="https://github.com/catptype/" class="font-medium text-cyan-400 hover:text-cyan-300 hover:underline">Catptype</a>. This website is not affiliated with Nexon, Nexon Games, or Yostar.
        </p>
        <p class="mt-1 text-sm text-slate-500">
          Source code: <a href="https://github.com/catptype/Blue-Archive-Gacha-Simulator" class="font-medium text-cyan-400 hover:text-cyan-300 hover:underline">GitHub</a>
        </p>
      </div>

    </div>
  </div>
</div>
{% endblock %}