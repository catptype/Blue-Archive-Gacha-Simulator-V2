{% extends 'app_web/components/base.html' %} 
{% load static %}

{% block css %}
<link rel="stylesheet" type="text/css" href="{% static 'css/student-page.css' %}">
{% endblock %}

{% block title %}Student list{% endblock %} 

{% block body %}
<!--
  This page implements an interactive, two-column character browser.
  The left column is an expanding filter menu.
  The right column is a seamless, infinitely looping character carousel.
-->
<div class="relative min-h-screen w-full bg-black antialiased text-white overflow-hidden">
    
    <!-- =============================================================== -->
    <!-- PAGE BACKGROUND                                                 -->
    <!-- =============================================================== -->
    
    {% include 'app_web/components/background.html' %}

    <!-- =============================================================== -->
    <!-- MAIN CONTAIN GRID                                               -->
    <!-- =============================================================== -->
    
    <!-- This grid is positioned below the navbar and fills the remaining screen space. -->
    <div id="main-grid" class="absolute top-20 left-0 right-0" style="height: calc(100vh - 5rem);">

        <!-- =============================================================== -->
        <!-- LEFT COLUMN: SCHOOL SELECTION                                   -->
        <!-- =============================================================== -->
        
        <!-- This sidebar acts as the filter menu and expands on hover. -->
        <div id="left-column" class="relative z-51 bg-black/60 backdrop-blur-sm border-r border-gray-800 p-3 flex flex-col gap-y-3 transition-all duration-300 ease-in-out overflow-y-auto">
            {% for school in schools %}
                <button
                    class="school-button w-full p-2 rounded-lg flex items-center transition-colors duration-300 ease-in-out bg-gray-600/80 hover:bg-sky-600/70 {% if forloop.first %}active ring-2 ring-sky-400{% endif %}"
                    data-school-id="{{ school.school_id }}">
                    
                    <img src="{% url 'serve_school_image' school_id=school.school_id %}" alt="{{ school.school_name }} Logo" class="h-12 w-12 object-contain flex-shrink-0 transition-all duration-300">
                    
                    <span class="school-name ml-3 font-bold text-lg whitespace-nowrap overflow-hidden transition-all duration-300 ease-in-out opacity-0 max-w-0">
                        {{ school.school_name }}
                    </span>
                </button>
            {% endfor %}
        </div>

        <!-- =============================================================== -->
        <!-- RIGHT COLUMN: CHARACTER DISPLAY                                 -->
        <!-- =============================================================== -->
        
        <div id="right-column" class="h-full relative overflow-hidden">
            <!-- A single container where carousels will be injected. -->
            <div id="carousel-stage" class="w-full h-full">
                <!-- A loading spinner that shows by default -->
                <div id="loading-spinner" class="w-full h-full flex items-center justify-center">
                    <svg class="animate-spin -ml-1 mr-3 h-10 w-10 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                      <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                      <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                    </svg>
                </div>
            </div>
        </div>

    </div>
</div>
{% endblock %}

{% block js %}
<script defer src="{% static 'js/student-page.js' %}"></script>
{% endblock %}